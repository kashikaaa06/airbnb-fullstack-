<%- layout('./layouts/boilerplate') -%>

<div class="container mt-4">
    <h3>All Listings</h3>

    <div class="row">
        <% for(let listing of allListings) { %>
        <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
            <a href="/listings/<%= listing._id %>" class="card-link">
                <div class="card h-100">
                    <img src="<%= listing.image.url %>" class="card-img-top" alt="<%= listing.title %>" style="height: 200px; object-fit: cover;">
                    <div class="card-img-overlay"></div>
                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title"><%= listing.title %></h5>
                        <p class="card-text flex-grow-1"><%= listing.description ? listing.description.substring(0, 100) + '...' : 'No description available' %></p>
                        <div class="mt-auto">
                            <p class="card-price fw-bold text-danger">â‚¹<%= listing.price ? listing.price.toLocaleString("en-IN") : 'N/A' %></p>
                            <p class="card-location text-muted"><%= listing.location %>, <%= listing.country %></p>
                        </div>
                    </div>
                </div>
            </a>
        </div>
        <% } %>
    </div>
</div>